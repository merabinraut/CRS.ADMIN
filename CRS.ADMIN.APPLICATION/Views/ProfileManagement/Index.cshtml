@model CRS.ADMIN.APPLICATION.Models.UserProfileManagement.UserProfileModel

@{
    ViewBag.Title = "Profile Management";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="px-8 py-4 flex flex-col gap-8">
    <div class="grid gap-8">
        <div class="flex justify-between items-center">
            <div>
                <div class="heading-title">
                    @CRS.ADMIN.APPLICATION.Resources.Resource.Profile
                </div>
                <div class="span-title-light-gray">
                    @CRS.ADMIN.APPLICATION.Resources.Resource.View_your_personal_informations.
                </div>
            </div>
        </div>
        <div class="flex gap-[53px]">
            <div class="cursor-pointer">
                <img src="@Model.ProfileImage" alt="profile"
                     class="rounded-full w-[96px] h-[96px] object-fill"
                     id="OpenImgUpload">

            </div>
            <input type="file" hidden id="imgupload" style="display:none" oninput="uploadImg(this)" accept="image/png, image/gif, image/jpeg" />
            <div class="grid gap2">
                <div class="text-[18px] gap-3 font-semibold text-[#1B1B1B] flex items-center">
                    @Html.AntiForgeryToken()
                    <span id="displayedText">@Model.FullName</span>
                    <i class="las la-edit cursor-pointer" onclick="makeEditable()"></i>
                </div>
                <table class="text-[14px] text-[#404040]">
                    <tr>
                        <td class=" text-[#A09E91] pr-2">
                            @CRS.ADMIN.APPLICATION.Resources.Resource.Role:
                        </td>
                        <td>
                            @Model.RoleName
                        </td>
                    </tr>
                    <tr>
                        <td class=" text-[#A09E91] pr-2">
                            @CRS.ADMIN.APPLICATION.Resources.Resource.Username:
                        </td>
                        <td>
                            @Model.UserName
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="grid  gap-6 ">
            @*<div class="grid gap-2">
                    <div class="text-[#1B1B1B] font-semibold">
                        Biography
                    </div>
                    <p class="text-sm text-[#3E3E3E]">

                        Hey, this is Akira. With visionary clubs like <b>
                            Club Earth, Club GS
                        </b> they revolutionized the
                        industry, leaving an unforgettable legacy.
                    </p>
                    <p class="text-sm text-[#3E3E3E]">
                        “Where beats meet the paradise.”
                    </p>

                </div>*@
            <div class=" pb-4 pt-3 grid gap-2">
                @*<a href="">
                        <div class="flex gap-3 text-[#3E3E3E] text-sm items-center leading-[15px]">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M5.33239 1.59998C3.27426 1.59998 1.6001 3.27568 1.6001 5.33435V10.6677C1.6001 12.7258 3.27581 14.4 5.33447 14.4H10.6678C12.7259 14.4 14.4001 12.7243 14.4001 10.6656V5.33227C14.4001 3.27413 12.7244 1.59998 10.6657 1.59998H5.33239ZM11.7334 3.73331C12.0278 3.73331 12.2668 3.97224 12.2668 4.26664C12.2668 4.56104 12.0278 4.79997 11.7334 4.79997C11.439 4.79997 11.2001 4.56104 11.2001 4.26664C11.2001 3.97224 11.439 3.73331 11.7334 3.73331ZM8.0001 4.79997C9.7649 4.79997 11.2001 6.23517 11.2001 7.99997C11.2001 9.76477 9.7649 11.2 8.0001 11.2C6.2353 11.2 4.8001 9.76477 4.8001 7.99997C4.8001 6.23517 6.2353 4.79997 8.0001 4.79997ZM8.0001 5.86664C7.4343 5.86664 6.89168 6.0914 6.4916 6.49148C6.09152 6.89156 5.86676 7.43418 5.86676 7.99997C5.86676 8.56577 6.09152 9.10839 6.4916 9.50847C6.89168 9.90854 7.4343 10.1333 8.0001 10.1333C8.56589 10.1333 9.10851 9.90854 9.50859 9.50847C9.90867 9.10839 10.1334 8.56577 10.1334 7.99997C10.1334 7.43418 9.90867 6.89156 9.50859 6.49148C9.10851 6.0914 8.56589 5.86664 8.0001 5.86664Z"
                                      fill="#333333" />
                            </svg>
                            www.instagram.com/
                        </div>
                    </a>
                    <a href="">
                        <div class="flex gap-3 text-[#3E3E3E] text-sm items-center leading-[15px]">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M7.99996 0.960022C4.11196 0.960022 0.959961 4.11202 0.959961 8.00002C0.959961 11.5296 3.55996 14.4439 6.9478 14.953V9.86594H5.20604V8.01538H6.9478V6.78402C6.9478 4.7453 7.94108 3.85026 9.63548 3.85026C10.447 3.85026 10.8761 3.91042 11.0793 3.93794V5.5533H9.92348C9.20412 5.5533 8.95292 6.23522 8.95292 7.00386V8.01538H11.0611L10.775 9.86594H8.95292V14.968C12.3891 14.5018 15.04 11.5639 15.04 8.00002C15.04 4.11202 11.888 0.960022 7.99996 0.960022Z"
                                      fill="#333333" />
                            </svg>
                            www.facebook.com/
                        </div>
                    </a>
                    <a href="">
                        <div class="flex gap-3 text-[#3E3E3E] text-sm items-center leading-[15px]">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M12.8 2.13336H3.19997C2.61063 2.13336 2.1333 2.6107 2.1333 3.20003V12.8C2.1333 13.3894 2.61063 13.8667 3.19997 13.8667H12.8C13.3893 13.8667 13.8666 13.3894 13.8666 12.8V3.20003C13.8666 2.6107 13.3888 2.13336 12.8 2.13336ZM12.1008 7.18616C12.0314 7.19256 11.9616 7.19683 11.8912 7.19683C11.0938 7.19683 10.393 6.78723 9.98504 6.16696C9.98504 7.79309 9.98504 9.64376 9.98504 9.67469C9.98504 11.1067 8.82397 12.2672 7.3925 12.2672C5.96104 12.2667 4.79997 11.1056 4.79997 9.67416C4.79997 8.24216 5.96104 7.08163 7.3925 7.08163C7.4469 7.08163 7.4997 7.08643 7.5525 7.08963V8.3675C7.49917 8.36109 7.44744 8.35149 7.3925 8.35149C6.66184 8.35149 6.0693 8.94403 6.0693 9.67469C6.0693 10.4054 6.6613 10.9979 7.3925 10.9979C8.1237 10.9979 8.76904 10.4219 8.76904 9.69123C8.76904 9.66189 8.78184 3.7339 8.78184 3.7339H10.0026C10.1173 4.82563 10.9989 5.68749 12.1008 5.76643V7.18616Z"
                                      fill="#333333" />
                            </svg>
                            www.tiktok.com/
                        </div>
                    </a>*@
                <a href="">
                    <div class="flex gap-3 text-[#3E3E3E] text-sm items-center leading-[15px]">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M2.88027 1.28009C1.99707 1.28009 1.28027 1.99689 1.28027 2.88009V13.1201C1.28027 14.0033 1.99707 14.7201 2.88027 14.7201H13.1203C14.0035 14.7201 14.7203 14.0033 14.7203 13.1201V2.88009C14.7203 1.99689 14.0035 1.28009 13.1203 1.28009H2.88027ZM8.00027 3.52009C10.6467 3.52009 12.8003 5.23504 12.8003 7.34384C12.8003 8.18544 12.4672 8.94754 11.7696 9.69634C11.2672 10.2659 10.4516 10.8929 9.69965 11.4113C8.94765 11.9233 8.25627 12.3264 8.00027 12.432C7.89787 12.4736 7.82107 12.4926 7.76027 12.4926C7.54907 12.4926 7.56802 12.2691 7.58402 12.1763C7.59682 12.1059 7.65465 11.7726 7.65465 11.7726C7.67065 11.6542 7.6864 11.466 7.6384 11.3476C7.584 11.2164 7.36957 11.149 7.21277 11.117C4.90877 10.8162 3.20027 9.23184 3.20027 7.34384C3.20027 5.23504 5.35387 3.52009 8.00027 3.52009ZM7.67777 6.07947C7.51655 6.08246 7.36027 6.20549 7.36027 6.40009V8.32009C7.36027 8.49673 7.50363 8.64009 7.68027 8.64009C7.85691 8.64009 8.00027 8.49673 8.00027 8.32009V7.39884L8.69965 8.50572C8.88077 8.75916 9.28027 8.63145 9.28027 8.32009V6.40009C9.28027 6.22345 9.13691 6.08009 8.96027 6.08009C8.78363 6.08009 8.64027 6.22345 8.64027 6.40009V7.36009L7.9409 6.21447C7.87298 6.11943 7.7745 6.07767 7.67777 6.07947ZM4.80027 6.08009C4.62363 6.08009 4.48027 6.22345 4.48027 6.40009V8.32009C4.48027 8.49673 4.62363 8.64009 4.80027 8.64009H5.76027C5.93691 8.64009 6.08027 8.49673 6.08027 8.32009C6.08027 8.14345 5.93691 8.00009 5.76027 8.00009H5.12027V6.40009C5.12027 6.22345 4.97691 6.08009 4.80027 6.08009ZM6.72027 6.08009C6.54363 6.08009 6.40027 6.22345 6.40027 6.40009V8.32009C6.40027 8.49673 6.54363 8.64009 6.72027 8.64009C6.89691 8.64009 7.04027 8.49673 7.04027 8.32009V6.40009C7.04027 6.22345 6.89691 6.08009 6.72027 6.08009ZM9.92027 6.08009C9.74363 6.08009 9.60027 6.22345 9.60027 6.40009V8.32009C9.60027 8.49673 9.74363 8.64009 9.92027 8.64009H10.8803C11.0569 8.64009 11.2003 8.49673 11.2003 8.32009C11.2003 8.14345 11.0569 8.00009 10.8803 8.00009H10.2403V7.68009H10.8803C11.0572 7.68009 11.2003 7.53673 11.2003 7.36009C11.2003 7.18345 11.0572 7.04009 10.8803 7.04009H10.2403V6.72009H10.8803C11.0569 6.72009 11.2003 6.57673 11.2003 6.40009C11.2003 6.22345 11.0569 6.08009 10.8803 6.08009H9.92027Z"
                                  fill="#333333" />
                        </svg>
                        +81 @Model.MobileNumber
                    </div>
                </a>

            </div>
        </div>
    </div>
</div>



@section scripts{
    <script>
        //Admin logo and profile update section
        $('#OpenImgUpload').click(function () { $('#imgupload').trigger('click'); });
        function uploadImg(input) {
            if (input.files && input.files[0]) {
                var file = document.getElementById('imgupload'),
                    formData = new FormData();

                if (file.files.length > 0) {
                    for (var i = 0; i < file.files.length; i++) {
                        formData.append('file' + i, file.files[i]);
                    }
                }
                $.ajax({
                    type: 'POST',
                    async: false,
                    url: '/ProfileManagement/ChangeProfileImage',
                    dataType: 'json',
                    contentType: false,
                    processData: false,
                    data: formData,
                    success: function (result) {
                        if (result.Code == 0) {
                            window.location.href = window.location.href;
                        }
                    },
                    error: function (ex) {
                        window.location.href = window.location.href;
                    }
                });
            }
        }
    </script>

    <script>



        function makeEditable() {
            var displayedText = document.getElementById('displayedText');
            var inputField = document.createElement('input');
            inputField.value = displayedText.innerText;
            inputField.type = 'text';

            displayedText.parentNode.replaceChild(inputField, displayedText);
            inputField.focus();
            inputField.addEventListener('blur', function () {
                displayedText.innerText = inputField.value;
                updateServer(inputField.value);
            });
        }

        function updateServer(newFullName) {
            var token = $('input[name="__RequestVerificationToken"]').val();
            $.ajax({
                url: '/ProfileManagement/UpdateAdminDetail',
                type: 'POST',
                data: {
                    UPM: { FullName: newFullName },
                    __RequestVerificationToken: token
                },
                success: function (response) {
                    window.location.href = window.location.href;
                },
                error: function (error) {
                    console.error('Error updating server:', error);
                }
            });
        }
    </script>
}